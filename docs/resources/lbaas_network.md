---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "mgc_lbaas_network Resource - terraform-provider-mgc"
subcategory: "Load Balancer"
description: |-
  Manages network load balancers in Magalu Cloud.
---

# mgc_lbaas_network (Resource)

Manages network load balancers in Magalu Cloud.

## Example Usage

```terraform
resource "mgc_lbaas_network" "basic_http_lb" {
  name        = "basic-http-lb-${random_id.suffix.hex}-and-more"
  description = "Basic HTTP load balancer for web servers"
  type        = "proxy"
  visibility  = "internal"
  vpc_id      = local.vpc_id

  # Backend configuration for web servers
  backends = [
    {
      name              = "web-backend"
      description       = "Backend for web servers"
      balance_algorithm = "round_robin"
      targets_type      = "raw"
      panic_threshold   = 50

      targets = [
        {
          ip_address = "192.168.30.4"
          port       = 80
        }
      ]
    }
  ]

  # HTTP listener
  listeners = [
    {
      name         = "http-listener"
      description  = "HTTP listener on port 80"
      port         = 80
      protocol     = "tcp"
      backend_name = "web-backend"
    }
  ]

  # Basic ACL to allow all HTTP traffic
  acls = [
    {
      name             = "allow-http"
      action           = "ALLOW"
      ethertype        = "IPv4"
      protocol         = "tcp"
      remote_ip_prefix = "0.0.0.0/0"
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `backends` (Attributes List) Backend configurations for the load balancer. (see [below for nested schema](#nestedatt--backends))
- `listeners` (Attributes List) Listener configurations for the load balancer. (see [below for nested schema](#nestedatt--listeners))
- `name` (String) The name of the load balancer.
- `type` (String) The type of the load balancer. Only 'proxy' type is currently supported by the API.
- `visibility` (String) The visibility of the load balancer. Valid values: 'internal' (accessible only within VPC), 'external' (accessible from internet).
- `vpc_id` (String) The ID of the VPC where the load balancer is deployed.

### Optional

- `acls` (Attributes List) Access Control Lists for the load balancer. (see [below for nested schema](#nestedatt--acls))
- `description` (String) The description of the load balancer.
- `health_checks` (Attributes List) Health check configurations for the load balancer. (see [below for nested schema](#nestedatt--health_checks))
- `public_ip_id` (String) The ID of the public IP associated with the load balancer. Required for external load balancers, must be omitted for internal load balancers.
- `subnetpool_id` (String) The ID of the subnet pool for the load balancer.
- `tls_certificates` (Attributes List) TLS certificate configurations for the load balancer. (see [below for nested schema](#nestedatt--tls_certificates))

### Read-Only

- `id` (String) The unique identifier of the load balancer.

<a id="nestedatt--backends"></a>
### Nested Schema for `backends`

Required:

- `balance_algorithm` (String) The load balancing algorithm.
- `name` (String) The name of the backend.
- `targets` (Attributes List) The targets for this backend. (see [below for nested schema](#nestedatt--backends--targets))
- `targets_type` (String) The type of targets. Valid values: 'instance' (requires nic_id and port), 'raw' (requires ip_address and port).

Optional:

- `close_connections_on_host_health_failure` (Boolean) Whether to close connections when a host health check fails.
- `description` (String) The description of the backend.
- `health_check_name` (String) The name of the health check associated with this backend.
- `panic_threshold` (Number) The panic threshold percentage for the backend.

Read-Only:

- `id` (String) The unique identifier of the backend.

<a id="nestedatt--backends--targets"></a>
### Nested Schema for `backends.targets`

Required:

- `port` (Number) The port of the target.

Optional:

- `ip_address` (String) The IP address of the target. Required when targets_type is 'raw', must be empty when targets_type is 'instance'.
- `nic_id` (String) The NIC ID of the target. Required when targets_type is 'instance', must be empty when targets_type is 'raw'.

Read-Only:

- `id` (String) The unique identifier of the target.



<a id="nestedatt--listeners"></a>
### Nested Schema for `listeners`

Required:

- `backend_name` (String) The name of the backend associated with this listener.
- `name` (String) The name of the listener.
- `port` (Number) The port for the listener.
- `protocol` (String) The protocol for the listener. Valid values: 'tcp' (for network load balancers), 'tls' (for SSL/TLS termination). Note: values are case-sensitive and must be lowercase.

Optional:

- `description` (String) The description of the listener.
- `tls_certificate_name` (String) The name of the TLS certificate for HTTPS listeners.

Read-Only:

- `id` (String) The unique identifier of the listener.


<a id="nestedatt--acls"></a>
### Nested Schema for `acls`

Required:

- `action` (String) The action for the ACL rule. Valid values: 'ALLOW', 'DENY', 'DENY_UNSPECIFIED'. Note: values are case-sensitive and must be uppercase.
- `ethertype` (String) The ethertype for the ACL rule.
- `name` (String) The name of the ACL rule.

Optional:

- `protocol` (String) The protocol for the ACL rule.
- `remote_ip_prefix` (String) The remote IP prefix for the ACL rule.

Read-Only:

- `id` (String) The unique identifier of the ACL rule.


<a id="nestedatt--health_checks"></a>
### Nested Schema for `health_checks`

Required:

- `name` (String) The name of the health check.
- `port` (Number) The port for health checks.
- `protocol` (String) The protocol for health checks. Valid values: 'tcp', 'http'. Note: values are case-sensitive and must be lowercase.

Optional:

- `description` (String) The description of the health check.
- `healthy_status_code` (Number) The HTTP status code considered healthy.
- `healthy_threshold_count` (Number) The number of consecutive successful health checks required.
- `initial_delay_seconds` (Number) The initial delay before starting health checks.
- `interval_seconds` (Number) The interval between health checks.
- `path` (String) The path for HTTP health checks.
- `timeout_seconds` (Number) The timeout for health checks.
- `unhealthy_threshold_count` (Number) The number of consecutive failed health checks before marking unhealthy.

Read-Only:

- `id` (String) The unique identifier of the health check.


<a id="nestedatt--tls_certificates"></a>
### Nested Schema for `tls_certificates`

Required:

- `certificate` (String, Sensitive, [Write-only](https://developer.hashicorp.com/terraform/language/resources/ephemeral#write-only-arguments)) The TLS certificate content.
- `name` (String) The name of the TLS certificate.
- `private_key` (String, Sensitive, [Write-only](https://developer.hashicorp.com/terraform/language/resources/ephemeral#write-only-arguments)) The private key for the TLS certificate.

Optional:

- `description` (String) The description of the TLS certificate.

Read-Only:

- `expiration_date` (String) The expiration date of the TLS certificate.
- `id` (String) The unique identifier of the TLS certificate.

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
terraform import mgc_lbaas_network.http_proxy my_lbaas_id
```
